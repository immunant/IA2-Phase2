RUN: sh -c "for hdr in avformat.h avio.h; do %ia2_generate_checks $(pkg-config --variable includedir libavformat)/libavformat/$hdr %S/include %T/$hdr; done"
RUN: sh -c "for hdr in dict.h version.h macros.h; do %ia2_generate_checks $(pkg-config --variable includedir libavutil)/libavutil/$hdr %S/include %T/$hdr; done"
RUN: ia2-header-rewriter --output-header %T/fn_ptr_ia2_avutil.h %T/wrapper.c %T/dict.h %T/version.h %T/macros.h -- -I%resource_dir -I%ia2_include
RUN: ia2-header-rewriter --output-header %T/fn_ptr_ia2_avformat.h %T/wrapper.c %T/avformat.h %T/avio.h -- -I%resource_dir -I%ia2_include

RUN: cat %T/avformat.h | sed 's/^.*CHECK.*$//' | FileCheck %T/avformat.h

RUN: cat %T/avio.h | sed 's/^.*CHECK.*$//' | FileCheck %T/avio.h

RUN: cat %T/dict.h | sed 's/^.*CHECK.*$//' | FileCheck %T/dict.h

# version.h has only #defines, so it doesn't have anything we would CHECK
# macros.h has only #defines, so it doesn't have anything we would CHECK
